trigger:
    - master

variables:
    # Azure Resource Manager connection created during pipeline creation
  azureSubscription: 'SC-AzureDevOps'

    # Web app name
  webAppName: 'sampleapp-lso1234'

    # Environment name
  environmentName: 'dev'

    # Agent VM image name
  vmImageName: 'ubuntu-latest'

pool:
  vmImage: ubuntu-latest

stages:
  - stage: build
    displayName: Build
    jobs:
    - job: build_dev
      displayName: Build dev
      steps:
        - template: ../../pipeline-templates/steps/app-service-build.yaml
          parameters:
            workingDirectory: '$(System.DefaultWorkingDirectory)/backend'
        
        - template: ../../pipeline-templates/steps/app-service-deploy.yaml
          parameters:
            workingDirectory: '$(System.DefaultWorkingDirectory)/backend'
            serviceConnection: '955daeae-7823-41f8-a648-a19777bcb4ef'
            webAppName: 'sampleapp-lso1234'